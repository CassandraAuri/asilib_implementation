

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>asilib.utils package &mdash; asilib  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="asilib" href="modules.html" />
    <link rel="prev" title="asilib.io package" href="asilib.io.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> asilib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="asilib.io.html">asilib.io package</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">asilib.utils package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">asilib</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="asilib.html">asilib package</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="asilib.io.html">asilib.io package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">asilib.utils package</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">asilib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>asilib.utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/asilib.utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="asilib-utils-package">
<h1>asilib.utils package<a class="headerlink" href="#asilib-utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-asilib.utils.map_along_magnetic_field">
<span id="asilib-utils-map-along-magnetic-field-module"></span><h2>asilib.utils.map_along_magnetic_field module<a class="headerlink" href="#module-asilib.utils.map_along_magnetic_field" title="Permalink to this headline">¶</a></h2>
<p>This script maps the AC6 data location, along Earth’s magnetic field lines
(assumed IGRF + ext_model), to map_alt in km.</p>
<dl class="field-list simple">
<dt class="field-odd">param ext_model</dt>
<dd class="field-odd"><p>The external magnetic field model. The internal model is IGRF.</p>
</dd>
<dt class="field-even">type ext_model</dt>
<dd class="field-even"><p>string</p>
</dd>
<dt class="field-odd">param map_alt</dt>
<dd class="field-odd"><p>The AC6 mapping altitude in kilometers.</p>
</dd>
<dt class="field-even">type map_alt</dt>
<dd class="field-even"><p>float</p>
</dd>
<dt class="field-odd">param catalog_name</dt>
<dd class="field-odd"><p>The catalog (or data) name to load</p>
</dd>
<dt class="field-even">type catalog_name</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">param catalog_dir</dt>
<dd class="field-odd"><p>The catalog directory to load the data from.</p>
</dd>
<dt class="field-even">type catalog_dir</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
<dl class="py function">
<dt id="asilib.utils.map_along_magnetic_field.map_along_magnetic_field">
<code class="sig-prename descclassname"><span class="pre">asilib.utils.map_along_magnetic_field.</span></code><code class="sig-name descname"><span class="pre">map_along_magnetic_field</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">space_time</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">map_alt</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'OPQ77'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maginput</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hemisphere</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="headerlink" href="#asilib.utils.map_along_magnetic_field.map_along_magnetic_field" title="Permalink to this definition">¶</a></dt>
<dd><p>This function uses the IRBEM-Lib library to map the spacecraft’s position:
latitude, longitude, altitude with the spacecraft’s time to the map_alt
altitude in units of km, in the same hemisphere.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>space_time</strong> (<em>np.ndarray</em>) – A 2d array with shape (nPositions, 4) with the columns containing the
time, latitude, longitude, and altitude coordinates in that order.</p></li>
<li><p><strong>map_alt</strong> (<em>float</em>) – The altitude to map to, in km, in the same hemisphere.</p></li>
<li><p><strong>b_model</strong> (<em>str</em>) – The magnetic field model to use, by default the model is Olson-Pfitzer
1974. This parameter is passed directly into IRBEM.MagFields as the
‘kext’ parameter.</p></li>
<li><p><strong>maginput</strong> (<em>dict</em>) – If you use a differnet b_model that requires time-dependent parameters,
supply the appropriate values to the maginput dictionary. It is directly
passed into IRBEM.MagFields so refer to IRBEM on the proper format.</p></li>
<li><p><strong>hemisphere</strong> (<em>int</em>) – The hemisphere to map to. This kwarg is passed to IRBEM and can be one of
these four values:
0    = same magnetic hemisphere as starting point
+1   = northern magnetic hemisphere
-1   = southern magnetic hemisphere
+2   = opposite magnetic hemisphere as starting point</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>magnetic_footprint</strong> – A numpy.array with size (n_times, 3) with lat, lon, alt
columns representing the magnetic footprint coordinates.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-asilib.utils.project_lla_to_skyfield">
<span id="asilib-utils-project-lla-to-skyfield-module"></span><h2>asilib.utils.project_lla_to_skyfield module<a class="headerlink" href="#module-asilib.utils.project_lla_to_skyfield" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="asilib.utils.project_lla_to_skyfield.lla_to_skyfield">
<code class="sig-prename descclassname"><span class="pre">asilib.utils.project_lla_to_skyfield.</span></code><code class="sig-name descname"><span class="pre">lla_to_skyfield</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mission</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">station</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sat_lla</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_download</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><a class="headerlink" href="#asilib.utils.project_lla_to_skyfield.lla_to_skyfield" title="Permalink to this definition">¶</a></dt>
<dd><p>This function projects, i.e. maps, a satellite’s latitude, longitude, and altitude
(LLA) coordinates to the ASI’s azimuth and elevation coordinates and pixel index.
This function is useful to plot a satellite’s location in the ASI image using the
pixel indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mission</strong> (<em>str</em>) – The mission id, can be either THEMIS or REGO.</p></li>
<li><p><strong>station</strong> (<em>str</em>) – The station id to download the data from.</p></li>
<li><p><strong>sat_lla</strong> (<em>np.ndarray</em><em> or </em><em>pd.DataFrame</em>) – The satellite’s latitude, longitude, and altitude coordinates in a 2d array
with shape (nPosition, 3) where each row is the number of satellite positions
to map, and the columns correspond to latitude, longitude, and altitude,
respectively. The altitude is in kilometer units.</p></li>
<li><p><strong>force_download</strong> (<em>bool</em><em> (</em><em>optional</em><em>)</em>) – If True, download the calibration file even if it already exists.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>sat_azel</strong> (<em>np.ndarray</em>) – An array with shape (nPosition, 2) of the satellite’s azimuth and
elevation coordinates.</p></li>
<li><p><strong>asi_pixels</strong> (<em>np.ndarray</em>) – An array with shape (nPosition, 2) of the x- and y-axis pixel
indices for the ASI image.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>AssertionError</strong> – If the sat_lla argument does not have exactly 3 columns (1st dimension).</p>
</dd>
</dl>
<div class="admonition-example admonition">
<p class="admonition-title">Example</p>
<p>import numpy as np</p>
<p>from asilib import lla_to_skyfield</p>
<p># THEMIS/ATHA’s LLA coordinates are (54.72, -113.301, 676 (meters)).
# The LLA is a North-South pass right above ATHA..
n = 50
lats = np.linspace(60, 50, n)
lons = -113.64*np.ones(n)
alts = 500**np.ones(n)
lla = np.array([lats, lons, alts]).T</p>
<p>azel, pixels = lla_to_skyfield(‘REGO’, ‘ATHA’, lla)</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-asilib.utils.start_generator">
<span id="asilib-utils-start-generator-module"></span><h2>asilib.utils.start_generator module<a class="headerlink" href="#module-asilib.utils.start_generator" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="asilib.utils.start_generator.start_generator">
<code class="sig-prename descclassname"><span class="pre">asilib.utils.start_generator.</span></code><code class="sig-name descname"><span class="pre">start_generator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#asilib.utils.start_generator.start_generator" title="Permalink to this definition">¶</a></dt>
<dd><p>A decorator to start a generator and advance it to
the first occurrence of yield. Decorator code is
almost for verbatim taken from David Beazley.</p>
<p>Source: <a class="reference external" href="http://dabeaz.com/coroutines/coroutine.py">http://dabeaz.com/coroutines/coroutine.py</a></p>
</dd></dl>

</div>
<div class="section" id="module-asilib.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-asilib.utils" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="modules.html" class="btn btn-neutral float-right" title="asilib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="asilib.io.html" class="btn btn-neutral float-left" title="asilib.io package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Mykhaylo Shumko.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>