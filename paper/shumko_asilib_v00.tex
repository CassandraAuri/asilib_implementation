\documentclass[draft]{agujournal2019}
\usepackage{url}
\usepackage{lineno}
\usepackage{soul}

\linenumbers
\draftfalse
\journalname{Earth and Space Science}


\begin{document}

\title{AuroraX, aurorax-api (or pyaurorax?), and aurorax-asilib: a user-friendly auroral all-sky imager analysis framework}

\authors{M. Shumko\affil{1, 2}, B. Gallardo-Lacourt\affil{1,2}, A.J. Halford\affil{1}, E. Donovan\affil{3}, E.L. Spanswick\affil{3}, D. Chaddock\affil{3}, I. Thompson, and K.R. Murphy}

\affiliation{1}{NASA's Goddard Space Flight Center, Greenbelt, Maryland, USA}
\affiliation{2}{Universities Space Research Association, Columbia, Maryland, USA}
\affiliation{3}{University of Calgary, Calgary, Alberta, Canada}

\correspondingauthor{M. Shumko}{msshumko@gmail.com}


\begin{keypoints}
\item AuroraX is an online interface to visualize the aurora and calculate conjunctions
\item aurorax-asilib is a companion Python package for detailed analysis of auroral all-sky imager data 
\item Together, these tools enable effortless end-to-end discovery and analysis of the aurora
\end{keypoints}


\begin{abstract}
Abstract
\end{abstract}


\section*{Plain Language Summary}
\noindent


\section{Introduction}\label{intro}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Brief history of ASIs and ASI arrays. Talk about why THEMIS ASI exists. Discuss CANOPUS?
            \item Breadth of possible science questions that can be answered with aurora image data.
            \item Problem: modern ASI arrays produce an immense volume of data.
            \item Why this software? Aurora ASI data formats very greatly, each with their own caveats. This centralized software package is maintained by the AuroraX team. 
            \item Benefits: Maintained by the AuroraX team so it's usability is of paramount importance
            \item Reduce the barrier to entry into auroral physics. Reduce the technical requirements and  enable rapid discovery of new science.
            \item Instead of case study results, larger statistical behavior will likely appear.
            \item remove the need for scientists needing to write duplicate code to use these popular missions. AS a result, this will enable scientists to dive right into the science and not need to know the details of data management (downloading and loading data, as well as applying routine data processing steps
      \end{itemize}
}

The rapidly increasing amount of imager data, together with unique data formats, significantly burdens space physicists with mondale and duplicated software engineering tasks---download data, load and parse the data correctly, etc. This unnecessary burden can also lead to mistakes in analysis software that may require unnecessary troubleshooting time from the ASI team. The goal of AuroraX is to overcome these drawbacks by providing a set of robust tools that most researchers need to analyze all-sky images. 

We describe our progress towards that goal in this article. First, we showcase the main features of the online AuroraX interface (https://aurorax.space/) such as the conjunction finder and the keogram finder. Second, we describe the aurorax-api, a Python library containing the interface to the AuroraX server to automatically download keograms and identify conjunctions. Third, we describe aurorax-asilib, the Python all-sky imager library. aurorax-asilib provides functions to the download, load, process data, and visualize THEMIS and REGO ASI data. 


\section{Design Philosophy (Principals?)}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item The primary design philosophy is to offer a robust set of functions that are useful for most researchers studying the aurora. We strived to strike a balance between complicated and user-friendly tools. 
            \item Online keogram and conjunction interface accessible anywhere with internet connection.
            \item Comprehensive ASI data analysis functionality on a PC.
            \item Abstract away data management steps: downloading data, loading data, applying routine data processing steps, and common visualizations.
      \end{itemize}
}

\section{AuroraX}\label{aurorax}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item What is it?
            \item A highly optimized conjunction search
            \item On-demand keograms
            \item Virtual Observatory
            \item pyaurorax (aurorax-api) to directly access AuroraX services.
            \item Figure 1: a) a screenshot of the nightly keograms, b) screenshot of the conjunction search tool. 
      \end{itemize}
}

\section{aurorax-asilib}\label{aurorax-asilib}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item What is it? A Python library that helps researchers analyze THEMIS and REGO ASI images.The main functions are summarized in Table 1. It is designed to be simple and runnable on personal machines (relatively low memory usage). We strived to strike a balance between complicated and user-friendly tools.
            \item A table of function names and one sentence to describe their functions.
            \item The large file sizes lead to relatively long processing time. This is a fact that can be partly mitigated by an SSD. 
            \item Plug-in based architecture that allows new ASI arrays to be added and called by the core aurorax-asilib software.
      \end{itemize}
}
\subsection{Download and load ASI image and skymap data}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Handles the downloading and loading of ASI images. Main design principle: Ultimately, ASI image files consists of time stamps and images, so the asilib functions really only need to return that data
            \item Similarly with skymap calibration files
            \item If a file is already downloaded, you do not need an internet connection to work with the data
      \end{itemize}
}

\subsection{Plotting single images}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Fisheye lens view
            \item Project onto a geographic map
            \item Figure 2: a) fisheye view, b) that fisheye view mapped to 110 km. (THEMIS)
      \end{itemize}
}

\subsection{Keograms}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Keograms along the meridian
            \item Uses generators to minimize the RAM usage
            \item Figure 3: A keogram for a full night. (REGO)
      \end{itemize}
}

\subsection{Creating ASI movies}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Basic fisheye animation
            \item Basic map animation (need to add functionality)
            \item Using co-routines to superpose data onto images (extensively used for conjunctions).
            \item Reference SI movie 1.
      \end{itemize}
}

\subsection{ASI analysis tools}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item lla2azel
            \item lla2footprint (requires IRBEM)
            \item area2pixels
      \end{itemize}
}

\subsection{An example: a satellite-ASI conjunction}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item Combine everything above into an example showing where the footprint of a LEO satellite is, and what 
            \item Figure 4: A conjunction montage and a time series
            \item (Implement an Imager.conjunction function)
            \item Reference movie S2
      \end{itemize}
}

\section{Quality Assurance}
\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item asilib on GitHub. unit and integration tests run automatically before every release.
            \item THEMIS and REGO data formats are set and won't change.
      \end{itemize}
}

\section{Conclusion}

\textcolor{blue}{
      OUTLINE
      \begin{itemize}
            \item AuroraX, aurorax-api, and aurorax-asilib tools provide the science community with a simple and a robust set of analysis tools
            \item Enable system-level science to be easily done
            \item Quickly sift through an immense volume of data to uncover new physics
            \item This is an end-to-end solution
            \item Plan to add support for other ASI arrays and satellites
            \item Help promote a uniform ASI data format for future cameras
      \end{itemize}
}

\acknowledgments
We are thankful for the engineers and scientists who made AuroraX, THEMIS ASI, and REGO ASI projects possible. M. Shumko and B. Gallardo-Lacourt acknowledge the support provided by the NASA Postdoctoral Program at the NASAâ€™s Goddard Space Flight Center, administered by Universities Space Research Association under contract with NASA. The THEMIS and REGO ASI data is available from \url{https://data.phys.ucalgary.ca/}.

% \bibliography{refs.bib}

\end{document}